To ssh into Google cloud
ssh -i ~/.ssh/google_compute_engine uma_roy_us_gmail_com@35.197.21.166

https://docs.python-guide.org/dev/virtualenvs/
pipenv commands

make sure ssh-agent is running?

sshfs -o IdentityFile=~/.ssh/google_compute_engine uma_roy_us_gmail_com@35.197.13.32:/home/uma_roy_us_gmail_com gcp/

pyenv to manage python versions
pipenv to manage installed packages
pipenv shell

Things to install:
transformers (local) (pipenv install '-e .')
scikit-learn
torch, torchvision
tensorboard
bson # for loading doordash pickle


python examples/text-classification/run_xnli.py \
  --data_dir="~/Documents/Programming/transformers/data_dir/" \
  --model_name_or_path="bert-base-multilingual-cased" \
  --output_dir="/tmp/retrieval-debug/" \
  --language="en" \
  --do_train


python examples/text-retrieval/run_retrieval.py \
  --data_dir="/Users/umaroy/Documents/Programming/transformers/data_dir/" \
  --model_name_or_path="bert-base-multilingual-cased" \
  --output_dir="/tmp/retrieval-debug-2/" \
  --do_train


scp -i ~/.ssh/google_compute_engine data_dir/cached_train_bert-base-multilingual-cased_128_doordash_cuisine uma_roy_us_gmail_com@35.197.21.166:/home/uma_roy_us_gmail_com/transformers/data_dir
scp -i ~/.ssh/google_compute_engine data_dir/cached_train_bert-base-multilingual-cased_128_doordash_title uma_roy_us_gmail_com@35.197.21.166:/home/uma_roy_us_gmail_com/transformers/data_dir

cached_train_bert-base-multilingual-cased_128_doordash_title
doordash_categorized.pkl

On remote machine:
python examples/text-retrieval/run_retrieval.py \
  --data_dir="/home/uma_roy_us_gmail_com/transformers/data_dir/" \
  --model_name_or_path="bert-base-multilingual-cased" \
  --output_dir="/tmp/retrieval-debug-2/" \
  --do_train

  scp -i ~/.ssh/google_compute_engine data_dir/XNLI-1.0 uma_roy_us_gmail_com@35.197.21.166:/home/uma_roy_us_gmail_com/transformers/data_dir
  scp -i ~/.ssh/google_compute_engine data_dir/ uma_roy_us_gmail_com@35.197.21.166:/home/uma_roy_us_gmail_com/transformers/data_dir


  python examples/text-classification/run_glue.py --model_name_or_path=bert-base-multilingual-cased --do_train --task_name=sts-b --data_dir=glue_data/STS-B  --output_dir=tmp/sts-b-test

How to rebase upstream into forked repo
-- https://medium.com/@topspinj/how-to-git-rebase-into-a-forked-repo-c9f05e821c8a

ssh -i ~/.ssh/google_compute_engine -R 6006:localhost:6006 uma_roy_us_gmail_com@35.197.21.166

For jupyter notebook port forwarding
gcloud compute ssh nvidia-gpu-cloud-pytorch-image-1-vm \
    --project vast-alcove-231918 \
    --zone us-west1-b \
    -- -L 2222:localhost:8888


gcloud compute ssh nvidia-gpu-cloud-pytorch-image-1-vm \
    --project vast-alcove-231918 \
    --zone us-west1-b \
    -- -L 2222:localhost:6006



To install pyenv and pipenv:
https://github.com/pyenv/pyenv/wiki/Common-build-problems
pyenv install 3.7.7
switch to relevant python version into pyenv,
then pip install pipenv
Then reload shell and pipenv should work...
